<!DOCTYPE html>
<html>

<form id="commentForm" action="comments" method="post"> 
    Comment: <textarea name="comment"></textarea> 
<!--
    <input type="hidden" name="username" value="how do you get this?" /> 
--!>
    <!-- TODO: find a way to get the username, parent, etc in... --!>
    <input type="submit" value="Post Comment" /> 
</form>

<head> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 


<script>

// prepare the form when the DOM is ready
$(document).ready(function() { 
    var options = { 
        target: '#output', // TODO: find out what the target is
        beforeSubmit:  showRequest,
        success:       showResponse
    }; 
 
    // bind to the form's submit event
    $('#commentForm').submit(function() {
        $(this).ajaxSubmit(options);
        return false;
    });
});
 
// pre-submit callback
function showRequest(formData, jqForm, options) {
    var queryString = $.param(formData);
    alert('About to submit: \n\n' + queryString);
    return true;
}
 
// post-submit callback
function showResponse(responseText, statusText, xhr, $form)  {
    alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + 
        '\n\nThe output div should have already been updated with the responseText.');
}
</script>

</head>
</html>
